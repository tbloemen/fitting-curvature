# Configuration file for embedding experiments

[data]
# Dataset to use: "mnist"
dataset = "mnist"

# Number of samples to use (use -1 for all samples)
n_samples = 1000

[embedding]
# Embedding dimension
embed_dim = 2

# Number of optimization iterations
n_iterations = 5000

# Loss function: "gu2019" for relative distortion or "mse" for mean squared error
loss_type = "gu2019"

[hyperparameters]
# Learning rates for different curvatures
# k > 0: spherical, k = 0: Euclidean, k < 0: hyperbolic
# Can specify per-curvature learning rates:
# learning_rates = { "-1" = 0.0001, "0" = 0.01, "1" = 0.0001 }
# Or use a default "k" key for all curvatures:
learning_rates = { k = 0.00001 }

# Initial scale for embedding initialization
# "auto" computes scale from data statistics
# Or specify a float value for manual control
init_scale = "auto"

[experiments]
# Curvatures to test
# k > 0: spherical, k = 0: Euclidean, k < 0: hyperbolic
curvatures = [-1, 0, 0.5, 1]

[evaluation]
# Number of neighbors for trustworthiness and continuity metrics
n_neighbors = 5

[batching]
# Batch size: number of pairs to sample per iteration
# Recommended: 2048-8192 for GPUs with 8-16GB memory
batch_size = 4096

# Pair sampling strategy: "random", "knn", "stratified", "negative"
# - "random": Uniformly random pair sampling (unbiased, baseline)
# - "knn": K-nearest neighbor sampling (preserves local structure)
# - "stratified": Distance-stratified sampling (balances local/global)
# - "negative": Contrastive sampling (positive k-NN + negative random pairs)
sampler_type = "knn"

# Sampler-specific parameters
[batching.sampler_params]
# For KNN and Negative samplers: number of neighbors
k = 15

# For Stratified sampler: number of distance bins
n_bins = 10

# For Stratified sampler: weight for sampling close pairs vs far pairs
# Higher values bias toward close pairs (local structure)
close_weight = 3.0

# For Negative sampler: ratio of positive (k-NN) to negative (random) pairs
# 0.7 means 70% from k-NN, 30% random
positive_ratio = 0.7
